--- xmlsec1-1.2.22/configure.ac.orig	2016-04-20 18:26:22.000000000 +0200
+++ xmlsec1-1.2.22/configure.ac	2016-05-16 19:03:57.729094153 +0200
@@ -683,16 +683,11 @@
 	fi
 	NSPR_INCLUDES_FOUND="yes"
 	NSPR_LIBS_FOUND="yes"
-	NSPR_PRINIT_H="$with_nspr/include/prinit.h"
+	NSPR_PRINIT_H="$with_nspr/include/nspr/prinit.h"
     else
 	for dir in $ac_nss_inc_dir ; do
     	    if test -f $dir/nspr/prinit.h ; then
-    		dnl do not add -I/usr/include because compiler does it anyway
-        	if test "z$dir" = "z/usr/include" ; then
-    		    NSPR_CFLAGS=""
-    		else
-    		    NSPR_CFLAGS="-I$dir/nspr"
-    		fi
+    		NSPR_CFLAGS="-I$dir/nspr"
 		NSPR_INCLUDES_FOUND="yes"
 		NSPR_PRINIT_H="$dir/nspr/prinit.h"
     		break
@@ -746,7 +741,7 @@
     NSS_NSS_H=""
 
     if test "z$with_nss" != "z" ; then
-	NSS_CFLAGS="$NSS_CFLAGS -I$with_nss/include -I$with_nss/include/nss"
+	NSS_CFLAGS="$NSS_CFLAGS -I$with_nss/include -I$with_nss/include/nss -I/usr/include/nspr"
 	if test "z$with_gnu_ld" = "zyes" ; then
 	    NSS_LIBS="$NSS_LIBS -Wl,-rpath-link -Wl,$with_nss/lib -L$with_nss/lib $NSS_LIBS_LIST"
         else
@@ -754,16 +749,11 @@
         fi
 	NSS_INCLUDES_FOUND="yes"
 	NSS_LIBS_FOUND="yes"
-	NSS_NSS_H="$with_nss/include/nss.h"
+	NSS_NSS_H="$with_nss/include/nss/nss.h"
     else
 	for dir in $ac_nss_inc_dir ; do
 	    if test -f $dir/nss/nss.h ; then
-        	dnl do not add -I/usr/include because compiler does it anyway
-    		if test "z$dir" = "z/usr/include" ; then
-        	    NSS_CFLAGS="$NSS_CFLAGS"
-		else
-            	    NSS_CFLAGS="$NSS_CFLAGS -I$dir/nss"
-		fi
+            	NSS_CFLAGS="$NSS_CFLAGS -I$dir/nss"
     		NSS_INCLUDES_FOUND="yes"
     		NSS_NSS_H="$dir/nss/nss.h"
     		break
